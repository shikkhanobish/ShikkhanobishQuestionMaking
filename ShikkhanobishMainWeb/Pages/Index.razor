@using ShikkhanobishMainWeb.Models
@using Flurl.Http
@using System.Globalization
@inject IJSRuntime jsRuntime

@using Microsoft.AspNetCore.Components;
@page "/{tID}"

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>MakeQuestion</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="Responsive bootstrap 4 admin template" name="description" />
    <meta content="Coderthemes" name="author" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link href="~/css/makeQues.css" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
</head>

<body style="background-color: #EDEDED">

    <!-- Begin page -->
    <!-- Start Page Content here -->
    <!-- ============================================================== -->



    <div class="content">

        <!-- Start container-fluid -->
        <div class="container-fluid">
            <!--row-->
            <div style="text-align:start">
                <h3 style="color: black; font-size: 18px; font-weight: bold ">Hello, @tName</h3>
            </div>
            <div class="col-12 " style="text-align:right">

                <a href="@($"MakeQuestion/{tID}")" class="btn btn-outline-purple">
                    <span> Make Question </span>
                </a>
            </div>
            <br />
            <div class="form-group row justify-content-center">

                <div class="col-3">
                    <div class="card-box widget-inline shadow-lg" style="background-color: #EADFFF;">
                        <div class="text-center p-2">
                            <h2 class="" style="color: #46189F"> <b>@countTQH</b></h2>
                            <p class="" style="color:rebeccapurple">
                                Total Uploaded

                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-3">
                    <div class="card-box widget-inline shadow-lg" style="background-color: #D2FFE9;">
                        <div class="text-center p-2">
                            <h2 class="" style="color: #10884E"> <b>@tap</b></h2>
                            <p class="" style="color: #10884E">
                                Total Approved

                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-3">
                    <div class="card-box widget-inline shadow-lg" style="background-color: #FFCECE;">
                        <div class="text-center p-2">
                            <h2 class="" style="color: #931919"> <b>@tde</b></h2>
                            <p class="" style="color: #931919">
                                Total Declined

                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-3">
                    <div class="card-box widget-inline shadow-lg" style="background-color: #EEEEEE;">
                        <div class="text-center p-2">
                            <h2 class="" style="color: #646464"> <b>@tpe</b></h2>
                            <p class="" style="color: #646464">
                                Total Pending

                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <!--end row -->

        </div>

        <div class="row" style="background-color: transparent">

            <div class="col-md-12">



                <div class="card">
                    <div class="card-body">
                        <div class="card-title">

                            <div class="form-group row">
                                <label class=" col-4" style="color:blueviolet;font-size:30px;">Task  History</label>
                                <div class=" col-4"></div>
                               
                                <br />

                            </div>
                            <div class="progress col-12 align-self-end">
                                <div class="progress-bar" role="progressbar" style="width: @prgsValue%;" aria-valuenow="@prgsValue" aria-valuemin="0" aria-valuemax="100">@prgsValue%</div>
                            </div>
                        </div>
                      

                        <div>
                            <div class="table-responsive" style="overflow: scroll; height: 400px;">
                                <table id="" class="table table-bordered" style="text-align:center; ">
                                    <thead style="color: black; font-weight: bold;font-size:10px;">
                                        <tr>
                                            <th>Task Number</th>
                                            <th>Assigned Number</th>
                                            <th>Class Name</th>
                                            <th>Subject Name</th>
                                            <th>Chapter Name</th>
                                            <th>Task Date</th>
                                            <th>Submitted</th>
                                            <th>Status</th>


                                        </tr>
                                    </thead>
                                    <tbody style="font-size: 10px; ">
                                        @foreach (var item in LiveshowInfo)
                                        {
                                            <tr>
                                                <td style="color: #2E2E2E">@item.index</td>
                                                <td style="color: #2E2E2E;"><button class="btn btn-info btn-sm" data-toggle="modal" data-target="#exampleModalCenter" @onclick="@( async () => await ShowMCQModal(item.MCQNumbers, item.chapterName))">See MCQ Numbers</button></td>
                                                <td style="color: #2E2E2E">@item.ClassName</td>
                                                <td style="color: #2E2E2E">@item.SubejctName</td>
                                                <td style="color: #2E2E2E">@item.chapterName</td>
                                                <td style="color: #2E2E2E">@item.date</td>
                                                <td style="color: green">@item.TotalSubmitted</td>

                                                <td style="color: @item.statusColor; font-weight: bold">@item.ActiveStatus</td>




                                            </tr>


                                        }

                                    </tbody>


                                </table>
                            </div>
                            <!-- Button trigger modal -->
                            <!-- Modal -->
                            <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLongTitle">MSQ Number <b>ChapterID: @thisShowchapterName</b></h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            @thismcqNumber
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>



                        <div class="form-group row">
                            <div class="col-3">
                                <select class="form-control btn btn-purple" style="" id="class" @onchange="selectFileLink">
                                    <option class="">Select Task Number</option>
                                    @foreach (var item in LiveshowInfo)
                                    {
                                        <option value="@item.FileLink">@item.index -> <a style="color: @item.statusColor; font-weight: bold"> @item.status</a></option>
                                    }
                                </select>
                            </div>
                            <div class="col-3">
                                <a href="@url" target="_blank" style="color: @linkTxtColor"> Open PDF Link</a>
                                <label>@link</label>
                            </div>

                        </div>

                    </div>

                </div>




                <div class="card">
                    <div class="card-body">
                        <div class="card-title">
                            <b>Question History</b>
                        </div>
                        <div class="form-group row">

                            <div class="col-3">

                                @foreach (var qs in showQSList1)
                                {
                                    <div class="card">
                                        <div class="col-12 card-title">
                                            <br />
                                            <label class="col-12" style=" text-align: center; border-radius: 10px; border: 1px solid @qs.reviewColor; padding: 3px 12px; color:@qs.reviewColor;">@qs.reviewName <a style="font-size: 10px">@qs.publishingDate</a> </label><p />
                                        </div>
                                        <div class="card-body">
                                            <span style="font-size:14px;color:grey; font-weight:bold">@qs.index</span><span>.</span>
                                            <span style="font-size:14px;font-weight:bold; color:black;">@qs.mainQuestion</span>
                                            <br />
                                            <br />
                                            <img class="makeQuesImage" style="display: @qs.qsimgvisi" src="@qs.quesImages" />
                                            <div>
                                                &nbsp;&nbsp;<span style="font-size:14px;color:blueviolet; ">A</span><span>.</span>&nbsp;&nbsp;<label style="font-size: 13px; color: @qs.op1BackColor;">@qs.option1</label>
                                                <br />
                                                <img class="makeQuesImage" style="display: @qs.op1imgvisi" src="@qs.opOneImg" />
                                            </div>
                                            <div>
                                                &nbsp;&nbsp;<span style="font-size: 14px; color: blueviolet; ">B</span><span>.</span>&nbsp;&nbsp;<label style="font-size: 13px; color: @qs.op2BackColor;">@qs.option2</label>
                                                <br />
                                                <img class="makeQuesImage" style="display: @qs.op2imgvisi" src="@qs.opTwoImg" />
                                            </div>
                                            <div>
                                                &nbsp;&nbsp;<span style="font-size: 14px; color: blueviolet; ">C</span><span>.</span>&nbsp;&nbsp;<label style="font-size: 13px; color: @qs.op3BackColor;">@qs.option3</label>
                                                <br />
                                                <img class="makeQuesImage" style="display: @qs.op3imgvisi" src="@qs.opThreeImg" />
                                            </div>
                                            <div>

                                                &nbsp;&nbsp;<span style="font-size: 14px; color: blueviolet;">D</span><span>.</span>&nbsp;&nbsp;<label style="font-size: 13px; color: @qs.op4BackColor;">@qs.option4</label>
                                                <br />
                                                <img class="makeQuesImage" style="display: @qs.op4imgvisi" src="@qs.opFourImg" />
                                            </div>
                                        </div>

                                    </div>
                                }
                            </div>
                            <div class="col-3">
                                @foreach (var qs in showQSList2)
                                {
                                    <div class="card">
                                        <div class="col-12 card-title">
                                            <br />
                                            <label class="col-12" style=" text-align: center; border-radius: 10px; border: 1px solid @qs.reviewColor; padding: 3px 12px; color:@qs.reviewColor;">@qs.reviewName <a style="font-size: 10px">@qs.publishingDate</a> </label><p />
                                        </div>
                                        <div class="card-body">
                                            <span style="font-size:14px;color:grey; font-weight:bold">@qs.index</span><span>.</span>
                                            <span style="font-size:14px;font-weight:bold; color:black;">@qs.mainQuestion</span>
                                            <br />
                                            <br />
                                            <img class="makeQuesImage"  style="display: @qs.qsimgvisi" src="@qs.quesImages" />
                                            <div>
                                                &nbsp;&nbsp;<span style="font-size:14px;color:blueviolet; ">A</span><span>.</span>&nbsp;&nbsp;<label style="font-size: 13px; color: @qs.op1BackColor;">@qs.option1</label>
                                                <br />
                                                <img class="makeQuesImage" style="display: @qs.op1imgvisi" src="@qs.opOneImg" />
                                            </div>
                                            <div>
                                                &nbsp;&nbsp;<span style="font-size: 14px; color: blueviolet; ">B</span><span>.</span>&nbsp;&nbsp;<label style="font-size: 13px; color: @qs.op2BackColor;">@qs.option2</label>
                                                <br />
                                                <img class="makeQuesImage" style="display: @qs.op2imgvisi" src="@qs.opTwoImg" />
                                            </div>
                                            <div>
                                                &nbsp;&nbsp;<span style="font-size: 14px; color: blueviolet; ">C</span><span>.</span>&nbsp;&nbsp;<label style="font-size: 13px; color: @qs.op3BackColor;">@qs.option3</label>
                                                <br />
                                                <img class="makeQuesImage" style="display: @qs.op3imgvisi" src="@qs.opThreeImg" />
                                            </div>
                                            <div>

                                                &nbsp;&nbsp;<span style="font-size: 14px; color: blueviolet;">D</span><span>.</span>&nbsp;&nbsp;<label style="font-size: 13px; color: @qs.op4BackColor;">@qs.option4</label>
                                                <br />
                                                <img class="makeQuesImage" style="display: @qs.op4imgvisi" src="@qs.opFourImg" />
                                            </div>
                                        </div>

                                    </div>
                                }

                            </div>
                            <div class="col-3">

                                @foreach (var qs in showQSList3)
                                {
                                    <div class="card">
                                        <div class="col-12 card-title">
                                            <br />
                                            <label class="col-12" style=" text-align: center; border-radius: 10px; border: 1px solid @qs.reviewColor; padding: 3px 12px; color:@qs.reviewColor;">@qs.reviewName <a style="font-size: 10px">@qs.publishingDate</a> </label><p />
                                        </div>
                                        <div class="card-body">
                                            <span style="font-size:14px;color:grey; font-weight:bold">@qs.index</span><span>.</span>
                                            <span style="font-size:14px;font-weight:bold; color:black;">@qs.mainQuestion</span>
                                            <br />
                                            <br />
                                            <img class="makeQuesImage" style="display: @qs.qsimgvisi" src="@qs.quesImages" />
                                            <div>
                                                &nbsp;&nbsp;<span style="font-size:14px;color:blueviolet; ">A</span><span>.</span>&nbsp;&nbsp;<label style="font-size: 13px; color: @qs.op1BackColor;">@qs.option1</label>
                                                <br />
                                                <img class="makeQuesImage" style="display: @qs.op1imgvisi" src="@qs.opOneImg" />
                                            </div>
                                            <div>
                                                &nbsp;&nbsp;<span style="font-size: 14px; color: blueviolet; ">B</span><span>.</span>&nbsp;&nbsp;<label style="font-size: 13px; color: @qs.op2BackColor;">@qs.option2</label>
                                                <br />
                                                <img class="makeQuesImage" style="display: @qs.op2imgvisi" src="@qs.opTwoImg" />
                                            </div>
                                            <div>
                                                &nbsp;&nbsp;<span style="font-size: 14px; color: blueviolet; ">C</span><span>.</span>&nbsp;&nbsp;<label style="font-size: 13px; color: @qs.op3BackColor;">@qs.option3</label>
                                                <br />
                                                <img class="makeQuesImage" style="display: @qs.op3imgvisi" src="@qs.opThreeImg" />
                                            </div>
                                            <div>

                                                &nbsp;&nbsp;<span style="font-size: 14px; color: blueviolet;">D</span><span>.</span>&nbsp;&nbsp;<label style="font-size: 13px; color: @qs.op4BackColor;">@qs.option4</label>
                                                <br />
                                                <img class="makeQuesImage" style="display: @qs.op4imgvisi" src="@qs.opFourImg" />
                                            </div>
                                        </div>

                                    </div>
                                }
                            </div>
                            <div class="col-3">

                                @foreach (var qs in showQSList4)
                                {
                                    <div class="card">
                                        <div class="col-12 card-title">
                                            <br />
                                            <label class="col-12" style=" text-align: center; border-radius: 10px; border: 1px solid @qs.reviewColor; padding: 3px 12px; color:@qs.reviewColor;">@qs.reviewName <a style="font-size: 10px">@qs.publishingDate</a> </label><p />
                                        </div>
                                        <div class="card-body">
                                            <span style="font-size:14px;color:grey; font-weight:bold">@qs.index</span><span>.</span>
                                            <span style="font-size:14px;font-weight:bold; color:black;">@qs.mainQuestion</span>
                                            <br />
                                            <br />
                                            <img class="makeQuesImage" style="display: @qs.qsimgvisi" src="@qs.quesImages" />
                                            <div>
                                                &nbsp;&nbsp;<span style="font-size:14px;color:blueviolet; ">A</span><span>.</span>&nbsp;&nbsp;<label style="font-size: 13px; color: @qs.op1BackColor;">@qs.option1</label>
                                                <br />
                                                <img class="makeQuesImage" style="display: @qs.op1imgvisi" src="@qs.opOneImg" />
                                            </div>
                                            <div>
                                                &nbsp;&nbsp;<span style="font-size: 14px; color: blueviolet; ">B</span><span>.</span>&nbsp;&nbsp;<label style="font-size: 13px; color: @qs.op2BackColor;">@qs.option2</label>
                                                <br />
                                                <img class="makeQuesImage" style="display: @qs.op2imgvisi" src="@qs.opTwoImg" />
                                            </div>
                                            <div>
                                                &nbsp;&nbsp;<span style="font-size: 14px; color: blueviolet; ">C</span><span>.</span>&nbsp;&nbsp;<label style="font-size: 13px; color: @qs.op3BackColor;">@qs.option3</label>
                                                <br />
                                                <img class="makeQuesImage" style="display: @qs.op3imgvisi" src="@qs.opThreeImg" />
                                            </div>
                                            <div>

                                                &nbsp;&nbsp;<span style="font-size: 14px; color: blueviolet;">D</span><span>.</span>&nbsp;&nbsp;<label style="font-size: 13px; color: @qs.op4BackColor;">@qs.option4</label>
                                                <br />
                                                <img class="makeQuesImage" style="display: @qs.op4imgvisi" src="@qs.opFourImg" />
                                            </div>
                                        </div>

                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>







            </div>
        </div>
        <br />
        <br />
        <br />
        <!-- end container-fluid -->
        <!-- Footer Start -->
        <footer class="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        2021 &copy; shikkhanobish
                    </div>
                </div>
            </div>
        </footer>
        <!-- end Footer -->
    </div>
    <!-- end content -->
    <!-- END wrapper -->
    <!-- Vendor js -->

</body>
</html>

@code{
    [Parameter]
    public string tID { get; set; }
    public string thismcqNumber { get; set; }
    public string thisShowchapterName { get; set; }
    string makeTaskError { get; set; }
    bool canMakenewTask;
    public int tup, tap, tde, tpe;
    string link { get; set; }
    public string tName { get; set; }
    string url { get; set; }
    int countTQH;
    int prgs;
    DateTime StaringWeek;
    dataentryOperatorTask Liveitem { get; set; }
    string MakeQSTxt { get; set; }
    string linkTxtColor { get; set; }
    List<TeacherQuesHistory> tqhList = new List<TeacherQuesHistory>();
    List<Question> questionList = new List<Question>();
    List<Question> showQSList = new List<Question>();
    List<Question> showQSList1 = new List<Question>();
    List<Question> showQSList2 = new List<Question>();
    List<Question> showQSList3 = new List<Question>();
    List<Question> showQSList4 = new List<Question>();
    List<Teacher> teacherList = new List<Teacher>();
    List<ClassInfo> allClassList = new List<ClassInfo>();
    List<Subject> allSubject = new List<Subject>();
    List<Chapter> allChapter = new List<Chapter>();
    int prgsValue { get; set; }
    int firstWeekTotal;
    int secWeekTotal;
    int thirftWeekTotal;
    int forthWeekTotal;


    string showprgs { get; set; }
    List<Chapter> allc = new List<Chapter>();
    List<Subject> allsub = new List<Subject>();
    List<ClassInfo> allClass = new List<ClassInfo>();
    List<Teacher> teacherListN = new List<Teacher>();
    List<TeacherQuesHistory> thList = new List<TeacherQuesHistory>();
    List<dataentryOperatorTask> LiveshowInfo = new List<dataentryOperatorTask>();
    List<Question> quesList = new List<Question>();
    string selectedColorone = "";
    string selectedColortwo = "";
    string selectedColorthree = "";
    string selectedColorfour = "";
    string thisLink;
    string lastTaskEndTime;
    List<dataentryOperatorTask> operatorList = new List<dataentryOperatorTask>();
    int reload = 0;
    protected override async Task OnInitializedAsync()
    {
        makeTaskError = "";
        canMakenewTask = true;
        MakeQSTxt = "Make New Task";
        await Refresh();
    }
    public async Task Refresh()
    {


        linkTxtColor = "Gray;";
        showprgs = "Block";
        StateHasChanged();
        await Task.Run(() => prgsValue = 10);
        await getAllInfo();
        StateHasChanged();
        await Task.Run(() => prgsValue = 20);
        await GetTeacherQuestionHistory();
        StateHasChanged();
        await Task.Run(() => prgsValue = 30);
        await GetHistoryCount();
        await Task.Run(() => prgsValue = 40);
        StateHasChanged();
        await GetTeacherWithID();
        await Task.Run(() => prgsValue = 60);
        StateHasChanged();
        await Task.Run(() => prgsValue = 100);
        showprgs = "None";
        await Task.Run(() => prgsValue = 0);
        // await AutomatedTaskAssigner(int.Parse(tID));
        StateHasChanged();
    }
    public async Task ShowMCQModal(string mcqNumber, string name)
    {
        thismcqNumber = mcqNumber;
        thisShowchapterName = name;

    }
    public async Task makenewtak()
    {
        await AutomatedTaskAssigner(int.Parse(tID));
    }

    private void selectFileLink(ChangeEventArgs task)
    {
        if (task.Value.ToString()[0] == 'S')
        {
            linkTxtColor = "Gray";
            url = "";
        }
        else
        {
            linkTxtColor = "Blue";
            url = task.Value.ToString();
        }
        link = task.Value.ToString();

    }
    public async Task getAllInfo()
    {
        allc = await "https://api.shikkhanobish.com/api/ShikkhanobishLogin/getChapter".GetJsonAsync<List<Chapter>>();
        allsub = await "https://api.shikkhanobish.com/api/ShikkhanobishLogin/getSubject".GetJsonAsync<List<Subject>>();
        allClass = await "https://api.shikkhanobish.com/api/ShikkhanobishLogin/getClassInfo".GetJsonAsync<List<ClassInfo>>();
        operatorList = await "https://api.shikkhanobish.com/api/ShikkhanobishTeacher/getdataentryOperatorTask".PostJsonAsync(new { }).ReceiveJson<List<dataentryOperatorTask>>();
        teacherListN = await "https://api.shikkhanobish.com/api/ShikkhanobishTeacher/getAllTeacher".PostJsonAsync(new { }).ReceiveJson<List<Teacher>>();
        thList = await "https://api.shikkhanobish.com/api/ShikkhanobishLogin/getTeacherQuestionHistory".GetJsonAsync<List<TeacherQuesHistory>>();
        quesList = await "https://api.shikkhanobish.com/api/ShikkhanobishLogin/getQuestion".GetJsonAsync<List<Question>>();
        SortTaskList();
    }

    public void SortTaskList()
    {
        int taskindex = 0;
        List<dataentryOperatorTask> thisOpList = new List<dataentryOperatorTask>();

        for(int i = 0; i < operatorList.Count; i++)
        {
            if(int.Parse(tID) == operatorList[i].userID)
            {
                thisOpList.Add(operatorList[i]);
            }
        }
        for (int i = 0; i < thisOpList.Count; i++)
        {
            if (thisOpList[i].userID == int.Parse(tID))
            {
                string link = "";
                string cleanMCQNumber = "";
                bool now = false;
                bool cleanNow = false;
                taskindex++;
                thisOpList[i].index = taskindex;
                foreach (var ch in thisOpList[i].MCQNumbers)
                {

                    if (now)
                    {
                        link += ch;
                    }
                    if (ch == '#')
                    {
                        now = true;
                    }
                    if (ch == 'L')
                    {
                        cleanNow = true;
                    }
                    if (!cleanNow)
                    {
                        cleanMCQNumber += ch;
                    }

                }
                thisOpList[i].FileLink = link;
                thisOpList[i].MCQNumbers = cleanMCQNumber;
                if (thisOpList[i].reMain < 0)
                {
                    thisOpList[i].reMain = 0;
                }
                thisOpList[i].statusColor = "#979797";
                if (thisOpList[i].submitted >= 100)
                {
                    thisOpList[i].isTaskSubDone = "Block";
                    thisOpList[i].isTaskSubPending = "None";
                    thisOpList[i].isTaskSubNootDone = "None";
                    thisOpList[i].isTaskSubColor = "#08B483";
                }
                else
                {
                    thisOpList[i].isTaskSubNootDone = "Block";
                    thisOpList[i].isTaskSubDone = "None";
                    thisOpList[i].isTaskSubPending = "None";
                    thisOpList[i].isTaskSubColor = "#CE0C0C";
                }

                if (thisOpList[i].ActiveStatus == "Active")
                {
                    thisOpList[i].statusColor = "#541BD7";
                    thisOpList[i].isTaskSubPending = "Block";
                    thisOpList[i].isTaskSubDone = "None";
                    thisOpList[i].isTaskSubNootDone = "None";
                    thisOpList[i].isTaskSubColor = "#BFB10C";
                    thisOpList[i].status = "Active";
                }


            }

        }
        List<dataentryOperatorTask> shownow = new List<dataentryOperatorTask>();

        for (int u = 0; u < thisOpList.Count; u++)
        {
            if (thisOpList[u].userID == int.Parse(tID))
            {

                shownow.Add(thisOpList[u]);
            }
        }

        for (int m = 0; m < shownow.Count; m++)
        {
            if (shownow[m].status == "Active")
            {
                Liveitem = shownow[m];
            }
            for (int i = 0; i < allc.Count; i++)
            {
                if (allc[i].chapterID == shownow[m].chapterID)
                {
                    shownow[m].chapterName = allc[i].name;
                    for (int j = 0; j < allsub.Count; j++)
                    {
                        if (allsub[j].subjectID == allc[i].subjectID)
                        {
                            shownow[m].SubejctName = allsub[j].name;
                            for (int k = 0; k < allClass.Count; k++)
                            {
                                if (allsub[j].classID == allClass[k].classID)
                                {
                                    shownow[m].ClassName = allClass[k].name;
                                }
                            }
                        }
                    }
                }
            }
        }
        List<dataentryOperatorTask> SortedList = new List<dataentryOperatorTask>();
        SortedList = shownow.OrderBy(x => x.ActiveStatus).ToList();
        shownow = SortedList;

        LiveshowInfo = shownow;
    }
    public async Task GetTask()
    {


        List<dataentryOperatorTask> thisOpList = new List<dataentryOperatorTask>();
        List<dataentryOperatorTask> LivethisOpList = new List<dataentryOperatorTask>();
        foreach (var teacher in teacherListN)
        {
            if (teacher.teacherID == int.Parse(tID))
            {
                tName = teacher.name;
                break;
            }
        }

        CultureInfo culturen = new CultureInfo("en-US");
        thisOpList = operatorList;

        List<string> activeTaskList = new List<string>();
        List<int> doneOP = new List<int>();
        List<dataentryOperatorTask> thisopTask = new List<dataentryOperatorTask>();
        for (int i = 0; i < thisOpList.Count; i++)
        {
            thisOpList[i] = operatorList[i];
            for (int z = 0; z < teacherList.Count; z++)
            {
                if (thisOpList[i].userID == teacherList[z].teacherID)
                {
                    thisOpList[i].userName = teacherList[z].name;
                    break;
                }
            }
            for (int e = 0; e < allc.Count; e++)
            {
                if (allc[e].chapterID == thisOpList[i].chapterID)
                {
                    thisOpList[i].chapterName = allc[e].name;
                    break;
                }
            }
            //indivisual TAsk
            thisopTask = new List<dataentryOperatorTask>();
            bool shouldCheck = true;
            for (int j = 0; j < doneOP.Count; j++)
            {
                if (doneOP[j] == thisOpList[i].userID)
                {
                    shouldCheck = false;
                }
            }

            if (shouldCheck)
            {
                if (thisOpList[i].userID == int.Parse(tID))
                {
                    doneOP.Add(thisOpList[i].userID);
                    for (int k = 0; k < thisOpList.Count; k++)
                    {
                        if (thisOpList[i].userID == thisOpList[k].userID)
                        {
                            thisopTask.Add(thisOpList[k]);
                        }
                    }
                    ////// submit count
                    List<dataentryOperatorTask> SortedListN = new List<dataentryOperatorTask>();
                    SortedListN = thisopTask.OrderBy(x => x.startTime).ToList();
                    thisopTask = SortedListN;
                    int submitted = 0;
                    for (int k = 0; k < thisopTask.Count; k++)
                    {
                        for (int j = 0; j < thList.Count; j++)
                        {
                            if (thisopTask[k].userID == thList[j].teacherID)
                            {
                                CultureInfo culture = new CultureInfo("en-US");
                                DateTime HistoryDateFormat = DateTime.ParseExact(thList[j].review, "dd'-'MM'-'yyyy' 'HH':'mm':'ss", culture);
                                DateTime TaskDateFormatSt = DateTime.ParseExact(thisopTask[k].startTime, "MM/dd/yyyy hh:mm tt", culture);
                                DateTime TaskDateFormatEnd = new DateTime();
                                if (k == thisopTask.Count - 1)
                                {
                                    TaskDateFormatEnd = DateTime.Now;
                                }
                                else
                                {
                                    TaskDateFormatEnd = DateTime.ParseExact(thisopTask[k + 1].startTime, "MM/dd/yyyy hh:mm tt", culture);
                                }

                                if (TaskDateFormatSt < HistoryDateFormat && TaskDateFormatEnd > HistoryDateFormat)
                                {
                                    thisopTask[k].submitted++;
                                }
                            }

                        }
                        for (int l = 0; l < thisOpList.Count; l++)
                        {
                            if (thisOpList[l].taskID == thisopTask[k].taskID)
                            {
                                thisOpList[l].submitted = thisopTask[k].submitted;
                            }
                        }

                    }


                    ////// Active Define
                    var lastActive = DateTime.ParseExact(thisopTask[0].startTime, "MM/dd/yyyy hh:mm tt", culturen);
                    int indexID = 0;
                    for (int l = 0; l < thisopTask.Count; l++)
                    {
                        var thisDatetime = DateTime.ParseExact(thisopTask[l].startTime, "MM/dd/yyyy hh:mm tt", culturen);
                        if (lastActive < thisDatetime)
                        {
                            indexID = l;
                            lastActive = thisDatetime;
                        }
                    }
                    activeTaskList.Add(thisopTask[indexID].taskID);
                    var lastActiveTime = DateTime.ParseExact(thisopTask[indexID].endTime, "MM/dd/yyyy hh:mm tt", culturen);
                    var thisTime = DateTime.Now;

                    if (lastActiveTime < thisTime)
                    {
                        canMakenewTask = true;
                    }
                    else
                    {
                        canMakenewTask = false;
                    }
                    lastTaskEndTime = thisopTask[indexID].endTime;
                }

            }

        }
        for (int i = 0; i < thisOpList.Count; i++)
        {
            if (thisOpList[i].userID == int.Parse(tID))
            {
                string link = "";
                string cleanMCQNumber = "";
                bool now = false;
                bool cleanNow = false;
                foreach (var ch in thisOpList[i].MCQNumbers)
                {

                    if (now)
                    {
                        link += ch;
                    }
                    if (ch == '#')
                    {
                        now = true;
                    }
                    if (ch == 'L')
                    {
                        cleanNow = true;
                    }
                    if (!cleanNow)
                    {
                        cleanMCQNumber += ch;
                    }

                }
                thisOpList[i].FileLink = link;
                thisOpList[i].MCQNumbers = cleanMCQNumber;
                if (thisOpList[i].reMain < 0)
                {
                    thisOpList[i].reMain = 0;
                }
                thisOpList[i].statusColor = "#979797";
                if (thisOpList[i].submitted >= 100)
                {
                    thisOpList[i].isTaskSubDone = "Block";
                    thisOpList[i].isTaskSubPending = "None";
                    thisOpList[i].isTaskSubNootDone = "None";
                    thisOpList[i].isTaskSubColor = "#08B483";
                }
                else
                {
                    thisOpList[i].isTaskSubNootDone = "Block";
                    thisOpList[i].isTaskSubDone = "None";
                    thisOpList[i].isTaskSubPending = "None";
                    thisOpList[i].isTaskSubColor = "#CE0C0C";
                }
                thisOpList[i].status = "Inactive";
                ////
                for (int j = 0; j < activeTaskList.Count; j++)
                {
                    if (activeTaskList[j] == thisOpList[i].taskID)
                    {
                        thisOpList[i].statusColor = "#541BD7";
                        thisOpList[i].isTaskSubPending = "Block";
                        thisOpList[i].isTaskSubDone = "None";
                        thisOpList[i].isTaskSubNootDone = "None";
                        thisOpList[i].isTaskSubColor = "#BFB10C";
                        thisOpList[i].status = "Active";
                    }
                }
                ///
                var nt = DateTime.ParseExact(thisOpList[i].startTime, "MM/dd/yyyy hh:mm tt", culturen);
                thisOpList[i].startTime = nt.ToString("dd/MM/yyyy hh:mm tt");
                nt = DateTime.ParseExact(thisOpList[i].endTime, "MM/dd/yyyy hh:mm tt", culturen);
                thisOpList[i].endTime = nt.ToString("dd/MM/yyyy hh:mm tt");

            }

        }
        List<dataentryOperatorTask> shownow = new List<dataentryOperatorTask>();
        int taskindex = 0;
        for (int u = 0; u < thisOpList.Count; u++)
        {
            if (thisOpList[u].userID == int.Parse(tID))
            {
                taskindex++;
                thisOpList[u].index = taskindex;
                shownow.Add(thisOpList[u]);
            }
        }
        List<dataentryOperatorTask> SortedList = new List<dataentryOperatorTask>();
        SortedList = shownow.OrderBy(x => x.startTime).ToList();
        SortedList.Reverse();
        shownow = SortedList;
        for (int m = 0; m < shownow.Count; m++)
        {
            if (shownow[m].status == "Active")
            {
                Liveitem = shownow[m];
            }
            for (int i = 0; i < allc.Count; i++)
            {
                if (allc[i].chapterID == shownow[m].chapterID)
                {
                    for (int j = 0; j < allsub.Count; j++)
                    {
                        if (allsub[j].subjectID == allc[i].subjectID)
                        {
                            shownow[m].SubejctName = allsub[j].name;
                            for (int k = 0; k < allClass.Count; k++)
                            {
                                if (allsub[j].classID == allClass[k].classID)
                                {
                                    shownow[m].ClassName = allClass[k].name;
                                }
                            }
                        }
                    }
                }
            }
        }

        LiveshowInfo = shownow;








    }

    public async Task GetOperatorInfo()
    {
        List<dataentryOperatorTask> thisOpList = new List<dataentryOperatorTask>();
        List<dataentryOperatorTask> LivethisOpList = new List<dataentryOperatorTask>();
        foreach (var teacher in teacherListN)
        {
            if (teacher.teacherID == int.Parse(tID))
            {
                tName = teacher.name;
                break;
            }
        }

        CultureInfo culturen = new CultureInfo("en-US");
        thisOpList = operatorList;

        List<string> activeTaskList = new List<string>();
        List<int> doneOP = new List<int>();
        List<dataentryOperatorTask> thisopTask = new List<dataentryOperatorTask>();
        for (int i = 0; i < thisOpList.Count; i++)
        {
            thisOpList[i] = operatorList[i];
            for (int z = 0; z < teacherList.Count; z++)
            {
                if (thisOpList[i].userID == teacherList[z].teacherID)
                {
                    thisOpList[i].userName = teacherList[z].name;
                    break;
                }
            }
            for (int e = 0; e < allc.Count; e++)
            {
                if (allc[e].chapterID == thisOpList[i].chapterID)
                {
                    thisOpList[i].chapterName = allc[e].name;
                    break;
                }
            }
            //indivisual TAsk
            thisopTask = new List<dataentryOperatorTask>();
            bool shouldCheck = true;
            for (int j = 0; j < doneOP.Count; j++)
            {
                if (doneOP[j] == thisOpList[i].userID)
                {
                    shouldCheck = false;
                }
            }

            if (shouldCheck)
            {
                doneOP.Add(thisOpList[i].userID);
                for (int k = 0; k < thisOpList.Count; k++)
                {
                    if (thisOpList[i].userID == thisOpList[k].userID)
                    {
                        thisopTask.Add(thisOpList[k]);
                    }
                }




            }

        }
        for (int l = 0; l < operatorList.Count; l++)
        {
            List<int> listofTHisOPQuestionID = new List<int>();
            for (int k = 0; k < quesList.Count; k++)
            {
                if (operatorList[l].chapterID == quesList[k].chapterID)
                {
                    listofTHisOPQuestionID.Add(quesList[k].questionID);
                }
            }
            CultureInfo culture = new CultureInfo("en-US");
            DateTime TaskDateFormatSt = DateTime.ParseExact(operatorList[l].startTime, "MM/dd/yyyy hh:mm tt", culture);
            for (int p = 0; p < thList.Count; p++)
            {
                for (int o = 0; o < listofTHisOPQuestionID.Count; o++)
                {
                    if (listofTHisOPQuestionID[o] == thList[p].questionID)
                    {
                        DateTime HistoryDateFormat = DateTime.ParseExact(thList[p].review, "dd'-'MM'-'yyyy' 'HH':'mm':'ss", culture);

                        if (HistoryDateFormat >= TaskDateFormatSt)
                        {
                            thisOpList[l].submitted++;

                        }
                    }

                }

            }


        }
        for (int i = 0; i < thisOpList.Count; i++)
        {
            string link = "";
            string cleanMCQNumber = "";
            bool now = false;
            bool cleanNow = false;
            foreach (var ch in thisOpList[i].MCQNumbers)
            {

                if (now)
                {
                    link += ch;
                }
                if (ch == '#')
                {
                    now = true;
                }
                if (ch == 'L')
                {
                    cleanNow = true;
                }
                if (!cleanNow)
                {
                    cleanMCQNumber += ch;
                }

            }
            thisOpList[i].MCQNumbers = cleanMCQNumber;
            thisOpList[i].FileLink = link;
            if (thisOpList[i].submitted > 150)
            {
                thisOpList[i].reMain = 0;
            }
            else
            {
                thisOpList[i].reMain = 150 - thisOpList[i].submitted;
            }
            thisOpList[i].statusColor = "#979797";
            if (thisOpList[i].submitted >= 150)
            {
                thisOpList[i].isTaskSubDone = "Block";
                thisOpList[i].isTaskSubPending = "None";
                thisOpList[i].isTaskSubNootDone = "None";
                thisOpList[i].isTaskSubColor = "#08B483";
            }
            else
            {
                thisOpList[i].isTaskSubNootDone = "Block";
                thisOpList[i].isTaskSubDone = "None";
                thisOpList[i].isTaskSubPending = "None";
                thisOpList[i].isTaskSubColor = "#CE0C0C";
            }
            thisOpList[i].status = "Inactive";
            ////
            for (int j = 0; j < activeTaskList.Count; j++)
            {
                if (activeTaskList[j] == thisOpList[i].taskID)
                {
                    thisOpList[i].statusColor = "#541BD7";
                    thisOpList[i].isTaskSubPending = "Block";
                    thisOpList[i].isTaskSubDone = "None";
                    thisOpList[i].isTaskSubNootDone = "None";
                    thisOpList[i].isTaskSubColor = "#BFB10C";
                    thisOpList[i].status = "Active";
                }
            }
            ///
            var nt = DateTime.ParseExact(thisOpList[i].startTime, "MM/dd/yyyy hh:mm tt", culturen);
            thisOpList[i].startTime = nt.ToString("dd/MM/yyyy hh:mm tt");
            nt = DateTime.ParseExact(thisOpList[i].endTime, "MM/dd/yyyy hh:mm tt", culturen);
            thisOpList[i].endTime = nt.ToString("dd/MM/yyyy hh:mm tt");
        }
        int count = 0;
        List<dataentryOperatorTask> taskList = new List<dataentryOperatorTask>();
        for (int i = 0; i < thisOpList.Count; i++)
        {
            if (thisOpList[i].userID == int.Parse(tID))
            {
                count++;
                thisOpList[i].index = count;
                taskList.Add(thisOpList[i]);
            }
        }

        for (int m = 0; m < taskList.Count; m++)
        {
            for (int i = 0; i < allc.Count; i++)
            {
                if (allc[i].chapterID == taskList[m].chapterID)
                {
                    for (int j = 0; j < allsub.Count; j++)
                    {
                        if (allsub[j].subjectID == allc[i].subjectID)
                        {
                            taskList[m].SubejctName = allsub[j].name;
                            for (int k = 0; k < allClass.Count; k++)
                            {
                                if (allsub[j].classID == allClass[k].classID)
                                {
                                    taskList[m].ClassName = allClass[k].name;
                                }
                            }
                        }
                    }
                }
            }
        }
        ////// Active Define
        DateTime startingDate = new DateTime(2022, 2, 7);
        for (int l = 0; l < taskList.Count; l++)
        {
            CultureInfo culture = new CultureInfo("en-US");
            DateTime thisDate = DateTime.ParseExact(taskList[l].startTime, "dd/MM/yyyy hh:mm tt", culture);

            if (thisDate >= startingDate)
            {
                if(taskList[l].submitted < 150)
                {
                    taskList[l].status = "Active";
                    taskList[l].statusColor = "#541BD7";
                    taskList[l].isTaskSubPending = "Block";
                    taskList[l].isTaskSubDone = "None";
                    taskList[l].isTaskSubNootDone = "None";
                    taskList[l].isTaskSubColor = "#BFB10C";
                    taskList[l].status = "Active";
                }
                else
                {
                    taskList[l].status = "Inactive";
                }
            }
        }
        List<dataentryOperatorTask> SortedList = new List<dataentryOperatorTask>();
        SortedList = taskList.OrderBy(x => x.status).ToList();
        taskList = SortedList;
        LiveshowInfo = taskList;
    }


    public async Task GetTeacherQuestionHistory()
    {
        var thl = thList;

        for (int i = 0; i < thl.Count; i++)
        {
            if (thl[i].teacherID.ToString() == tID)
            {
                tqhList.Add(thl[i]);
            }
        }
        List<TeacherQuesHistory> SortedList = new List<TeacherQuesHistory>();
        SortedList = tqhList.OrderBy(x => x.review).ToList();
        SortedList.Reverse();
        tqhList.Clear();
        tqhList = SortedList;
        List<Question> thisqsList = new List<Question>();
        List<Question> ques = await "https://api.shikkhanobish.com/api/ShikkhanobishLogin/getQuestion".GetJsonAsync<List<Question>>();
        int indexCount = 1;
        for (int i = 0; i < ques.Count; i++)
        {
            for (int j = 0; j < tqhList.Count; j++)
            {
                if (tqhList[j].questionID == ques[i].questionID)
                {
                    Question thisQs = new Question();
                    thisQs = ques[i];
                    thisQs.index = indexCount;
                    thisQs.publishingDate = tqhList[j].review;
                    thisQs.op1BackColor = "Gray";
                    thisQs.op2BackColor = "Gray";
                    thisQs.op3BackColor = "Gray";
                    thisQs.op4BackColor = "Gray";
                    thisQs.qsimgvisi = (thisQs.quesImages != "N/A") ?"Block" : "None";
                    thisQs.op1imgvisi = (thisQs.opOneImg != "N/A") ? "Block" : "None";
                    thisQs.op2imgvisi = (thisQs.opTwoImg != "N/A") ? "Block" : "None";
                    thisQs.op3imgvisi = (thisQs.opThreeImg != "N/A") ? "Block" : "None";
                    thisQs.op4imgvisi = (thisQs.opFourImg != "N/A") ? "Block" : "None";


                    if (thisQs.rightAnswer == 1)
                    {
                        thisQs.op1BackColor = "Green";
                    }
                    if (thisQs.rightAnswer == 2)
                    {
                        thisQs.op2BackColor = "Green";
                    }
                    if (thisQs.rightAnswer == 3)
                    {
                        thisQs.op3BackColor = "Green";
                    }
                    if (thisQs.rightAnswer == 4)
                    {
                        thisQs.op4BackColor = "Green";
                    }
                    if (thisQs.review == 0)
                    {
                        thisQs.reviewName = "Pending";
                        thisQs.reviewColor = "Gray";
                    }
                    if (thisQs.review == 1)
                    {
                        thisQs.reviewName = "Approved";
                        thisQs.reviewColor = "Green";
                    }
                    if (thisQs.review == 2)
                    {
                        thisQs.reviewName = "Not Approved";
                        thisQs.reviewColor = "Red";
                    }
                    thisqsList.Add(thisQs);
                    indexCount++;
                }
            }
        }
        List<Question> SortedListNew = new List<Question>();
        SortedListNew = thisqsList.OrderBy(x => x.review).ToList();
        thisqsList.Clear();
        thisqsList = SortedListNew;
        showQSList = thisqsList;
        int count = 1;
        for (int i = 0; i < showQSList.Count; i++)
        {
            if (count % 1 == 0 && showQSList[i].review == 0)
            {
                count++;
                showQSList1.Add(showQSList[i]);
                showQSList.RemoveAt(i);
            }
            if (count % 2 == 0 && showQSList[i].review == 0)
            {
                count++;
                showQSList2.Add(showQSList[i]);
                showQSList.RemoveAt(i);
            }
            if (count % 3 == 0 && showQSList[i].review == 0)
            {
                count++;
                showQSList3.Add(showQSList[i]);
                showQSList.RemoveAt(i);
            }
            if (count % 4 == 0 && showQSList[i].review == 0)
            {
                count++;
                showQSList4.Add(showQSList[i]);
                showQSList.RemoveAt(i);
            }
        }

        int div = showQSList.Count / 4;
        int part = 1;
        if(div != 0)
        {
            for (int i = 0; i < showQSList.Count; i++)
            {
                if (i != 0)
                {
                    if (i % div == 0)
                    {
                        part++;
                    }
                }
                if (part == 1)
                {
                    showQSList1.Add(showQSList[i]);
                }
                if (part == 2)
                {
                    showQSList2.Add(showQSList[i]);
                }
                if (part == 3)
                {
                    showQSList3.Add(showQSList[i]);
                }
                if (part == 4)
                {
                    showQSList4.Add(showQSList[i]);
                }
                if (part == 5)
                {
                    showQSList1.Add(showQSList[i]);
                }


            }

            List<Question> SortedList1 = new List<Question>();
            SortedList1 = showQSList1.OrderBy(x => x.review).ToList();
            showQSList1 = SortedList1;

            List<Question> SortedList2 = new List<Question>();
            SortedList2 = showQSList2.OrderBy(x => x.review).ToList();
            showQSList2 = SortedList2;

            List<Question> SortedList3 = new List<Question>();
            SortedList3 = showQSList3.OrderBy(x => x.review).ToList();
            showQSList3 = SortedList3;

            List<Question> SortedList4 = new List<Question>();
            SortedList4 = showQSList4.OrderBy(x => x.review).ToList();
            showQSList4 = SortedList4;
        }


    }

    public async Task GetHistoryCount()
    {
        int count = 0;
        var list = await "https://api.shikkhanobish.com/api/ShikkhanobishLogin/getTeacherQuestionHistory".GetJsonAsync<List<TeacherQuesHistory>>();
        for (int i = 0; i < list.Count; i++)
        {
            if (tID == list[i].teacherID.ToString())
            {
                count++;
                foreach (var qs in quesList)
                {
                    if (qs.questionID == list[i].questionID)
                    {
                        if (qs.review == 0)
                        {
                            tpe++;
                        }
                        if (qs.review == 1)
                        {
                            tap++;
                        }
                        if (qs.review == 2)
                        {
                            tde++;
                        }
                    }
                }

            }
            countTQH = count;
        }
    }



    public async Task GetClassSubChap()
    {


        allClassList = await "https://api.shikkhanobish.com/api/ShikkhanobishLogin/getClassInfo".GetJsonAsync<List<ClassInfo>>();
        allSubject = await "https://api.shikkhanobish.com/api/ShikkhanobishLogin/getSubject".GetJsonAsync<List<Subject>>();
        allChapter = await "https://api.shikkhanobish.com/api/ShikkhanobishLogin/getChapter".GetJsonAsync<List<Chapter>>();


    }



    public async Task GetTeacherWithID()
    {
        var list = teacherListN;
        for (int i = 0; i < list.Count; i++)
        {
            if (tID == list[i].teacherID.ToString())
            {
                tName = list[i].name;
            }
        }
    }


    List<int> numList = new List<int>();
    string selectedMCQList;
    List<Chapter> selectedChapter = new List<Chapter>();
    private Random random = new Random();
    public string RandomString(int length)
    {
        const string chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
        return new string(Enumerable.Repeat(chars, length)
            .Select(s => s[random.Next(s.Length)]).ToArray());
    }
    public void GetALlChapter()
    {

        for (int i = 0; i < allc.Count; i++)
        {

            for (int j = 0; j < quesList.Count; j++)
            {
                if (quesList[j].chapterID == allc[i].chapterID)
                {

                    if (quesList[j].review == 1)
                    {
                        allc[i].approvedQS++;
                    }
                }
            }

            selectedChapter.Add(allc[i]);
        }
    }
    public async Task<QuestionPdfLink> getNewChapterToAssign()
    {
        QuestionPdfLink chapter = new QuestionPdfLink();
        var allPdfLink = await "https://api.shikkhanobish.com/api/ShikkhanobishLogin/getQuestionPdfLink".GetJsonAsync<List<QuestionPdfLink>>();

        for (int i = 0; i < selectedChapter.Count; i++)
        {
            if (selectedChapter[i].approvedQS < 50)
            {
                for (int j = 0; j < allPdfLink.Count; j++)
                {

                    if (selectedChapter[i].chapterID == allPdfLink[j].chapterID)
                    {
                        bool isAssigned = false;
                        for (int k = 0; k < operatorList.Count; k++)
                        {
                            if (selectedChapter[i].chapterID == operatorList[k].chapterID)
                            {
                                isAssigned = true;
                            }
                        }
                        if (isAssigned)
                        {
                            break;
                        }
                        for (int k = 0; k < allsub.Count; k++)
                        {
                            if (selectedChapter[i].subjectID == allsub[k].subjectID)
                            {
                                if (allsub[k].groupName == "Science" || allsub[k].groupName == "Com" && allsub[k].subjectID == selectedChapter[i].subjectID)
                                {

                                    return allPdfLink[j];
                                }
                            }
                        }


                    }


                }
            }


        }


        return chapter;

    }
    public async Task AutomatedTaskAssigner(int opID)
    {

        if (canMakenewTask)
        {
            MakeQSTxt = "Making New Task. Please Wait...";
            GetALlChapter();
            QuestionPdfLink thisSelectedChapterToAsign = await getNewChapterToAssign();
            CopyNum(thisSelectedChapterToAsign.noOfQues);
            var id = RandomString(50);
            string sd = DateTime.Now.ToString("MM/dd/yyyy hh:mm tt");
            string ed = DateTime.Now.AddDays(1).ToString("MM/dd/yyyy hh:mm tt");
            string thisd = DateTime.Now.ToString("dddd, dd MMMM yyyy");
            var res1 = await "https://api.shikkhanobish.com/api/ShikkhanobishTeacher/setdataentryOperatorTask".PostUrlEncodedAsync(new
            {
                userID = opID,
                MCQNumbers = selectedMCQList + " Link#" + thisSelectedChapterToAsign.link,
                date = opID,
                chapterID = thisSelectedChapterToAsign.chapterID,
                taskID = id,
                startTime = sd,
                endTime = ed
            })
    .ReceiveJson<Response>();

            await Refresh();
            MakeQSTxt = "Done";
            await Task.Delay(1000);
            MakeQSTxt = "Make New Task";
        }
        else
        {
            makeTaskError = "You can make new task after(MM/DD/YY) : " + lastTaskEndTime;
        }

    }
    public void CopyNum(int totalChapQues)
    {
        selectedMCQList = "";
        numList = new List<int>();
        Random rn = new Random();

        List<int> list = new List<int>();
        int num = 0;
        int totalChQNum = Convert.ToInt32(totalChapQues);
        if (totalChQNum <= 160)
        {
            num = totalChQNum;
            for (int i = 0; i < num; i++)
            {
                if (i == 150)
                {
                    break;
                }
                list.Add(i + 1);
            }
            numList = list;
        }
        else
        {
            num = 150;
            int reqNum = Convert.ToInt32(150);
            while (list.Count <= reqNum)
            {
                int thisNum = rn.Next(1, totalChQNum);
                bool match = false;
                for (int j = 0; j < list.Count; j++)
                {
                    if (list[j] == thisNum)
                    {
                        match = true;
                        break;
                    }
                }
                if (!match)
                {
                    list.Add(thisNum);
                }
            }
            numList = list;
        }



        List<int> SortedList = new List<int>();
        SortedList = numList.OrderBy(x => x).ToList();
        numList = SortedList;
        for (int i = 0; i < numList.Count; i++)
        {
            if (i == numList.Count - 1)
            {
                selectedMCQList = selectedMCQList + numList[i];
            }
            else
            {
                selectedMCQList = selectedMCQList + numList[i] + " , ";
            }

        }
    }




}

